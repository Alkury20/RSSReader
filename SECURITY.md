# üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å RSS Platform

## –û–±–∑–æ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

RSS Platform —Ä–µ–∞–ª–∏–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω–µ–π –∑–∞—â–∏—Ç—ã –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

‚úÖ **JWT —Ç–æ–∫–µ–Ω—ã**
- –¢–æ–∫–µ–Ω—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –∫–ª—é—á–æ–º
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 24 —á–∞—Å–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π)
- Payload –≤–∫–ª—é—á–∞–µ—Ç: userId, username, role

‚úÖ **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bcrypt —Å 10 —Ä–∞—É–Ω–¥–∞–º–∏ —Å–æ–ª–µ–Ω–∏—è
- –ü–∞—Ä–æ–ª–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã –ø–∞—Ä–æ–ª—è (6+ —Å–∏–º–≤–æ–ª–æ–≤)

### 2. Kubernetes Secrets

‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏**
- –í—Å–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Kubernetes Secrets
- JWT secret –∏ –ø–∞—Ä–æ–ª–∏ –ë–î —Ö—Ä–∞–Ω—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- Base64 –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ etcd

üìñ –°–º. [k8s/SECRETS_SETUP.md](./k8s/SECRETS_SETUP.md) –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

‚úÖ **Express-validator**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ Admin Service
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤ email, –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (trim)

‚úÖ **SQL Injection –∑–∞—â–∏—Ç–∞**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (pg module)
- –ù–∏–∫–∞–∫–∏—Ö –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–π SQL —Å—Ç—Ä–æ–∫

### 4. CORS

‚úÖ **–ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CORS**
- –†–∞–∑—Ä–µ—à–µ–Ω—ã cross-origin –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–ª—è production

### 5. –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

‚úÖ **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**
- –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –≤ —Å–≤–æ–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ Alpine Linux –æ–±—Ä–∞–∑—ã
- Unprivileged –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö

‚úÖ **–°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è**
- ClusterIP –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- LoadBalancer —Ç–æ–ª—å–∫–æ –¥–ª—è API Gateway
- –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ service DNS

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Production

### üî¥ –ö–†–ò–¢–ò–ß–ù–û

1. **–°–º–µ–Ω–∏—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã**
```bash
kubectl create secret generic rss-secrets \
  --from-literal=jwt-secret=$(openssl rand -base64 32) \
  --from-literal=db-password=$(openssl rand -base64 24) \
  --from-literal=db-user=postgres
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS/TLS**
```yaml
# –í ingress.yaml –¥–æ–±–∞–≤—å—Ç–µ TLS
spec:
  tls:
  - hosts:
    - rss-platform.yourdomain.com
    secretName: tls-secret
```

3. **–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ CORS**
```javascript
// –í backend —Å–µ—Ä–≤–∏—Å–∞—Ö
app.use(cors({
  origin: 'https://yourdomain.com',
  credentials: true
}));
```

### üü° –í–ê–ñ–ù–û

4. **Rate Limiting**
```bash
npm install express-rate-limit
```
```javascript
const rateLimit = require('express-rate-limit');
app.use(rateLimit({
  windowMs: 15 * 60 * 1000, // 15 –º–∏–Ω—É—Ç
  max: 100 // –º–∞–∫—Å–∏–º—É–º 100 –∑–∞–ø—Ä–æ—Å–æ–≤
}));
```

5. **Helmet.js –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤**
```bash
npm install helmet
```
```javascript
const helmet = require('helmet');
app.use(helmet());
```

6. **PostgreSQL SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**
```javascript
const pool = new Pool({
  ssl: {
    rejectUnauthorized: true,
    ca: fs.readFileSync('/path/to/ca-cert.pem')
  }
});
```

7. **Encryption at rest –¥–ª—è etcd**
```bash
# –í–∫–ª—é—á–∏—Ç—å –≤ Kubernetes
--encryption-provider-config=/path/to/encryption-config.yaml
```

8. **Network Policies**
```yaml
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: postgres-policy
spec:
  podSelector:
    matchLabels:
      app: postgres
  ingress:
  - from:
    - podSelector:
        matchLabels:
          app: feed-service
    - podSelector:
        matchLabels:
          app: admin-service
    - podSelector:
        matchLabels:
          app: auth-service
```

9. **RBAC –¥–ª—è Kubernetes**
```bash
# –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ–∫—Ä–µ—Ç–∞–º
kubectl create role secret-reader \
  --verb=get --verb=list \
  --resource=secrets
```

10. **–†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```bash
npm audit
npm audit fix
```

### üü¢ –ñ–ï–õ–ê–¢–ï–õ–¨–ù–û

11. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
- Trivy –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è Docker –æ–±—Ä–∞–∑–æ–≤
- Falco –¥–ª—è runtime security
- OWASP Dependency Check

12. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞—É–¥–∏—Ç**
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (ELK stack)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–π
- Audit logs –≤ Kubernetes

13. **Backup –∏ disaster recovery**
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã PostgreSQL
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- Snapshot PersistentVolumes

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

‚ö†Ô∏è –°–ª–µ–¥—É—é—â–∏–µ –≤–µ—â–∏ **–ù–ï –±–µ–∑–æ–ø–∞—Å–Ω—ã** –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –¥–ª—è production:

1. –î–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø–∞—Ä–æ–ª—å –ë–î: `postgres`
2. CORS —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
3. –ù–µ—Ç rate limiting
4. –ù–µ—Ç HTTPS (SSL/TLS)
5. –ù–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
6. JWT secret –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–ª–∞–±—ã–π

## Security Checklist –¥–ª—è Production

- [ ] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å–∏–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã (32+ —Å–∏–º–≤–æ–ª–∞)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω HTTPS/TLS —Å –≤–∞–ª–∏–¥–Ω—ã–º–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏
- [ ] CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏
- [ ] –î–æ–±–∞–≤–ª–µ–Ω rate limiting –Ω–∞ –≤—Å–µ endpoints
- [ ] Helmet.js —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SSL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- [ ] Network Policies –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] RBAC –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [ ] –í–∫–ª—é—á–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É–¥–∏—Ç–∞
- [ ] Dependency audit –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- [ ] Docker –æ–±—Ä–∞–∑—ã –ø—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã (Trivy/Snyk)
- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –±—ç–∫–∞–ø—ã –ë–î
- [ ] Protectionat rest –¥–ª—è etcd –≤–∫–ª—é—á–µ–Ω–∞
- [ ] –°–µ–∫—Ä–µ—Ç—ã —Ä–æ—Ç–∏—Ä—É—é—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ

## –û—Ç—á–µ—Ç –æ —É—è–∑–≤–∏–º–æ—Å—Ç—è—Ö

–ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ —É—è–∑–≤–∏–º–æ—Å—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ —Å–æ–æ–±—â–∏—Ç–µ —á–µ—Ä–µ–∑:
- GitHub Security Advisory (–ø—Ä–∏–≤–∞—Ç–Ω–æ)
- Email: security@yourdomain.com

**–ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–µ issues –¥–ª—è —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π!**

## –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

RSS Platform —Å–ª–µ–¥—É–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º:
- OWASP Top 10
- CIS Kubernetes Benchmark
- NIST Cybersecurity Framework (–±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å)

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [OWASP Cheat Sheet Series](https://cheatsheetseries.owasp.org/)
- [Kubernetes Security Best Practices](https://kubernetes.io/docs/concepts/security/)
- [Node.js Security Best Practices](https://nodejs.org/en/docs/guides/security/)
- [PostgreSQL Security](https://www.postgresql.org/docs/current/security.html)

